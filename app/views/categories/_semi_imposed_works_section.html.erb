 <!-- Section Œuvres à Contraintes Spécifiques : table "semi_imposed_works"-->
  <div class="col pe-3 d-flex flex-column align-items-center">
    <h4 class="px-3 rounded-pill">Oeuvres contraintes</h3>
    <% if @category.semi_imposed_works.none? %>
      <p class="text-white p-2 padding border rounded"> <i class="fas fa-circle-info pe-2 "></i>Renseignez ici le programme à choix guidé du candidat. Chaque ligne ajoutée doit comporter un nombre d'oeuvres, et la consigne attenante. Par exemple: <br/> <br/>"Cinq mélodies en langue française (dont deux au moins composées après 1900), à l’exclusion de
      Gabriel Fauré et d’Édouard Lalo..." </p>
    <% end %>
    <% @category.semi_imposed_works.each do |semi_imposed_work| %>
      <div class="text-white mb-3 w-100 border-top border-secondary">
        <div class="d-flex justify-content-between align-items-center">
          <div class="d-flex flex-column align-items-start pe-2">
            <div class="d-flex justify-content-between w-100">
              <h3 class="mb-0 border-top border-4 border-info text-start" style="font-weight: bold; font-size: <%= semi_imposed_work.title.length > 20 ? '1.7em' : '2em' %>;"><%= semi_imposed_work.title %></h3>              <div class="d-flex gap-3" >
              <%= link_to edit_organism_competition_edition_competition_category_semi_imposed_work_path(@organism, @competition, @edition_competition, @category, semi_imposed_work), class: 'btn btn-outline-light btn-sm border-0' do %>
                <i class="fas fa-pencil"></i>
              <% end %>
              <%= button_to organism_competition_edition_competition_category_semi_imposed_work_path(@organism, @competition, @edition_competition, @category, semi_imposed_work), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-outline-light btn-sm border-0' do %>
                <i class="fas fa-trash"></i>
              <% end %>
          </div>
            </div>
            <p class="text-start mb-0 " style="font-style: italic; color: #CCCCCC"><%= semi_imposed_work.guidelines %></p>
          </div>

        </div>
        <div class="d-flex justify-content-between align-items-center">
          <span class="badge border border-info rounded-pill">
            <%= semi_imposed_work.number %> oeuvres
          </span>
          <span class="badge border border-info rounded-pill">
            <i class="fas fa-clock"></i><%= semi_imposed_work.max_length_minutes %> minutes max total
          </span>
        </div>
      </div>
    <% end %>
    <button type="button" class="btn btn-outline-light my-3" data-bs-toggle="modal" data-bs-target="#semiImposedWorkModal">
      + Ajouter
    </button>
  </div>
<!-- Modal -->
  <div class="modal fade" id="semiImposedWorkModal" tabindex="-1" aria-labelledby="semiImposedWorkModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="semiImposedWorkModalLabel">Ajouter un semi-imposed work</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <%= render "semi_imposed_works/form", semi_imposed_work: @semi_imposed_work %>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
