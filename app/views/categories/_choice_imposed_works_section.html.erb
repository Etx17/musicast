 <!-- Section Oeuvres à choisir parmi une liste. table "choice_imposed_works" -->
<div class="col-lg-4 border p-3 shadow d-flex flex-column align-items-center">
  <h3 style="font-size: 3em;" class="px-3 rounded-pill text-white ">Oeuvres au choix dans une liste</h3>
    <% if @category.choice_imposed_works.none? %>
      <p>Créez ici une liste d'oeuvres et précisez le nombre que le candidat doit sélectionner. Vous pouvez aussi ajouter des consignes et un titre à cette liste si vous le souhaitez. </p>
    <% end %>
    <% @category.choice_imposed_works.each do |choice_imposed_work| %>

      <div class="container p-3 border border-3 shadow-sm mt-3 bg-white">
        <div class="d-flex flex-column">
          <div class="w-100 d-flex justify-content-between">
            <h2 class="text-dark"><%= choice_imposed_work.title %></h2>
            <div class="d-flex gap-2 align-items-center">

              <%= link_to edit_competition_edition_competition_category_choice_imposed_work_path(@competition, @edition_competition, @category, choice_imposed_work), class: 'btn p-0' do %>
                <i class="fas fa-edit"></i>
              <% end %>

              <%= button_to competition_edition_competition_category_choice_imposed_work_path(@competition, @edition_competition, @category, choice_imposed_work, redirect_path: category_path(@category)), method: :delete, data: { confirm: 'Are you sure?', turbo_confirm: "Are you sure?" }, class: 'btn ' do %>
                <i class="fas fa-trash"></i>
              <% end %>
            </div>
          </div>
        <h4><span class="bg-info rounded-pill p-2">Choisir <%= choice_imposed_work.number_to_select %> oeuvres</span></h4>          <p class="text-secondary"><%= choice_imposed_work.guidelines %></p>
        </div>
        <div class="d-flex flex-column gap-3">
          <% choice_imposed_work.airs.each do |work| %>
              <div class="card-body d-flex flex-column border px-3 py-1" style="border-radius: 8px; background: linear-gradient(to left, white, #fcf8ef);">
                <div class="d-flex justify-content-between align-items-start w-100">
                  <h4 class="card-text "><strong><%= work.title %></strong> </h4>
                  <%= button_to air_path(work, redirect_path: category_path(@category)), method: :delete, data: { confirm: 'Are you sure?', turbo_confirm: "Are you sure?" }, class: 'btn btn-light text-dark' do %>
                    <i class="fas fa-close" style="font-size: 0.7em;"></i>
                  <% end %>
                </div>

                <small class="card-text"><strong><%= work.composer %></strong> - <%= work.oeuvre %></small>

                <div class="d-flex justify-content-between align-items-center w-100">
                 <span class="badge rounded-pill text-secondary border text-dark"><%= work.tonality %></span>
                  <% if work.character.present? %><small class="card-text"><%= work.character %></small><% end %>
                  <small class="badge rounded-pill text-secondary border"><i class="fas fa-clock pe-1 text-secondary"></i><%= work.length_minutes %> min </small>
                </div>
              </div>
          <% end %>
        </div>
      </div>
    <% end %>
    <%= link_to '+ Ajouter une liste à choix multiple', new_competition_edition_competition_category_choice_imposed_work_path(@competition, @edition_competition, @category), class:" btn btn-outline-light my-3" %>
  </div>
