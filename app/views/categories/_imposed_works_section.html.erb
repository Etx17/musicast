<!-- Section Oeuvres obligatoires: table "imposed_works" -->
<div class="col-lg-4 border p-3 shadow d-flex flex-column align-items-center">
  <h3 style="font-size: 3em;" class=" px-3 rounded-pill text-white">Oeuvres impos√©es</h3>
    <% imposed_work = @category.imposed_work %>
    <% if imposed_work.present? %>
      <div class="container p-3">
        <div class="d-flex flex-column">
          <div class="w-100 d-flex justify-content-between">
            <div class="d-flex gap-2 align-items-center">
              <%= link_to edit_imposed_work_path(imposed_work), class: 'btn p-0' do %>
                <i class="fas fa-edit"></i>
              <% end %>

              <%= button_to imposed_work_path(imposed_work, redirect_path: category_path(@category)), method: :delete, data: { confirm: 'Are you sure?', turbo_confirm: "Are you sure?" }, class: 'btn ' do %>
                <i class="fas fa-trash"></i>
              <% end %>
            </div>
          </div>
          <p class="text-secondary"><%= imposed_work.guidelines %></p>
        </div>
        <div class="d-flex flex-column gap-3">
          <% imposed_work.airs.each do |work| %>
              <div class="card-body d-flex flex-column border px-3 py-1 bg-white">
                <div class="d-flex justify-content-between align-items-start w-100">
                  <h4 class="card-text "><strong><%= work.title %></strong> </h4>
                  <%= button_to air_path(work, redirect_path: category_path(@category)), method: :delete, data: { confirm: 'Are you sure?', turbo_confirm: "Are you sure?" }, class: 'btn btn-light text-dark' do %>
                    <i class="fas fa-close" style="font-size: 0.7em;"></i>
                  <% end %>
                </div>

                <small class="card-text"><strong><%= work.composer %></strong> - <%= work.oeuvre %></small>

                <div class="d-flex justify-content-between align-items-center w-100">
                 <span class="badge rounded-pill text-secondary border text-dark"><%= work.tonality %></span>
                  <% if work.character.present? %><small class="card-text"><%= work.character %></small><% end %>
                  <small class="badge rounded-pill text-secondary border"><i class="fas fa-clock pe-1 text-secondary"></i><%= work.length_minutes %> min </small>
                </div>
              </div>
          <% end %>
        </div>
      </div>
    <% else %>
      <%= link_to 'Add', new_imposed_work_path(category_id: @category.id), class: 'btn btn-primary', data: { toggle: 'modal', target: '#imposedWorkModal' } %>
    <% end %>
  </div>
