<div id="<%= dom_id tour %>">
  <main class="flex flex-col gap-2 p-2">
  <div class="text-2xl font-bold mb-2"><%= @tour.title %></div>

  <button class="items-center justify-center ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-primary/90 h-10 w-full md:w-auto bg-black text-white text-center py-2 px-4 rounded-md text-lg font-bold mx-auto block">
    Confirmer l'ordre de passage et générer le planning
  </button>
  <p class="text-sm text-gray-500 mt-2">This will regenerate the schedule (background job)</p>

  <div>


      <div class="overflow-auto p-5">
        <h2 class="text-center">Ordre de passage</h2>
        <table class="table table-bordered caption-top">
          <thead>
            <tr>
              <th class="p-2 text-center bg-grey ">Candidat</th>
              <th class="p-2 text-center bg-grey ">Airs présentés (titre racourci)</th>
              <th class="p-2 text-center bg-grey ">Order</th>
            </tr>
          </thead>
          <tbody>
            <% @tour.performances.order(:order).each do |performance| %>
              <tr class="">
                <td class="p-2 bg-light"><%= link_to performance.candidat.first_name, candidat_path(performance.candidat), target: '_blank' %></td>
                <%# <td class="p-2 text-center bg-light text-secondary"  ><%= performance.start_time.present? ? performance.start_time&.strftime("%I:%M %p") : "Pas encore défini" %>
                <td class="p-2 text-center bg-light text-secondary"  ><%= performance.airs_titles %></td>
                <td class="p-2 text-center bg-light">
                  <%= number_field_tag "order_#{performance.id}", performance.order, class: "form-control", min: 1, max: @tour.performances.count %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

  </div>
</main>
</div>
